/* globals wc_cart_fragments_params, jQuery */
!function(l){
/**
	 * Utilities
	 * --------------------------------------------------
	 */
// Calculate if screen size is smaller/larger than default breakpoint
function s(t){var n=l(window).width();return parseInt(n)<=parseInt(t)}
// Toogle scroll
function u(t,n){t?n.addClass("stop-scrolling"):n.removeClass("stop-scrolling")}
// Event throttling
// from http://www.sberry.me/articles/javascript-event-throttling-debouncing
function d(n,e){var a=!0;return function(t){a&&(a=!1,setTimeout(function(){a=!0},e),n(t))}}
/**
	 * Components
	 * --------------------------------------------------
	 */
// Increment Number Inputs
// Definitiions
var t=1200,n=992,f=768,g=576,e=480,v=!1,a=function(){"use strict";
// =================== private methods =================
function t(){r.$body=l("body")}function n(){r.$body.on("click",'[data-quantity="plus"]',function(t){e(t,this),o()}),r.$body.on("click",'[data-quantity="minus"]',function(t){a(t,this),o()})}function e(t,n){t.preventDefault();var e=l(n).attr("data-field"),a=l("#"+e),o=parseInt(a.val());isNaN(o)?a.val(0):a.val(o+1)}function a(t,n){t.preventDefault();var e=l(n).attr("data-field"),a=l("#"+e),o=parseInt(a.val());!isNaN(o)&&0<o?a.val(o-1):a.val(0)}function o(){var t=l('.woocommerce-cart-form :input[name="update_cart"]');t.length&&t.prop("disabled",!1)}
// =================== public methods ==================
function i(){t(),n()}
// =============== export public methods ===============
var r={};return{init:i}}(),o=function(){"use strict";
// =================== private methods =================
function t(){r.$window=l(window),r.$body=l("body"),r.$trigger=l('[data-toggle="offcanvas"]')}function n(){r.$body.on("click",c.OFF_CANVAS,function(t){t.preventDefault();var n=l(this),e=l(n.attr("data-target"));
// now toggle the offcanvas menu
v=!v,a(e)}),
// on window resize
r.$window.on("resize",d(function(){o(r.$trigger.attr("data-target"))},200))}function a(t){var n=l("#overlay");if(t.addClass(c.IS_ANIMATING),v){if(u(!0,r.$body),r.$trigger.addClass(c.ACTIVE).attr("aria-expanded","true"),t.addClass(c.IN),n.length)return;r.$body.append('<div id="overlay" class="offcanvas-overlay fixed-fs offcanvas--overlay" data-toggle="offcanvas" data-target="'+r.$trigger.attr("data-target")+'"></div>')}else u(!1,r.$body),r.$trigger.removeClass(c.ACTIVE).attr("aria-expanded","false"),t.removeClass(c.IN),n.remove();
// remove animation class
e(t)}function e(t){t.on("transitionend",function(){l(this).removeClass(c.IS_ANIMATING)})}function o(t){var n=l(t);s(g)||(v=!1,a(n))}
// =================== public methods ==================
function i(){t(),n()}
// =============== export public methods ===============
var r={},c={ACTIVE:"active",IN:"in",IS_ANIMATING:"is-animating",OFF_CANVAS:'[data-toggle="offcanvas"]'};return{init:i}}(),i=function(){"use strict";
// =================== private methods =================
function t(){c.$window=l(window),c.$heading=l("#primary-menu .menu-item-has-children > a"),c.$content=l("#primary-menu .menu-item-has-children > ul")}function n(){
// note: bootstrap api already prevents default on <a> elements
c.$window.on("resize",d(function(){e()},200))}function e(){if(s(f)){if(l(".foo").length)return;a()}else o()}function a(){c.$heading.each(function(t,n){var e;l(n).attr({id:"nav-heading-"+t,"data-toggle":"collapse","data-target":"#nav-collapse-"+t,"aria-expanded":"false","aria-controls":"nav-collapse-"+t})}),c.$content.each(function(t,n){var e=l(n),a=e.prev(c.$heading);e.attr({id:"nav-collapse-"+t,"aria-labelledby":"nav-heading-"+t,"data-parent":"#primary-menu"}).addClass("collapse"),i(a,e)})}function o(){c.$heading.each(function(t,n){var e;l(n).removeAttr("data-toggle data-target aria-expanded aria-controls")}),c.$content.each(function(t,n){var e;l(n).removeAttr("aria-labelledby data-parent").removeClass("collapse"),l(".foo").remove()})}function i(t,n){var e="View All",a=l('<li class="foo nav-item"><a href="'+t.attr("href")+'" class="nav-link">'+e+"</a></li>");n.prepend(a)}
// =================== public methods ==================
function r(){t(),n(),s(f)&&a()}
// =============== export public methods ===============
var c={};return{init:r}}(),r=function(){"use strict";
// =================== private methods =================
function t(){a.$subMenu=l(".menu-item-has-children"),a.$menu=l(".navigation-menu > .menu-item"),a.$menuMask=l(".menu-mask")}function n(){s(f)?(a.$subMenu.off("mouseenter"),a.$menu.off("mouseleave")):(
//DOM.$subMenu.on('hover', function() {
a.$subMenu.on("mouseenter",function(){var t,n=l(this).find(".sub-menu").height()+79;//55
a.$menuMask.height(n).show()}),a.$menu.on("mouseleave",function(){a.$menuMask.hide()}))}
// =================== public methods ==================
function e(){t(),n()}
// =============== export public methods ===============
var a={};return{init:e}}(),c=function(){"use strict";
/* =================== private methods ================= */
function t(){a.$carousel=l(".carousel"),a.$carouselWrap=l(".carousel-wrap"),a.$cell=l(".woocommerce-product-gallery__image"),a.$cellImage=l(".woocommerce-product-gallery__image img"),a.$carouselGallery=l(".woocommerce-product-gallery--wrap")}function n(){if(!(a.$cell.length<=1)&&o){var i=l('<div class="carousel-nav"></div>');a.$cell.each(function(t,n){var e,a,o='<img src="'+l(n).data("thumb")+'">';i.append('<div class="carousel-nav-cell">'+o+"</div>")}),i.insertAfter(a.$carouselGallery);var t,n={cellAlign:"left",contain:!0,asNavFor:".woocommerce-product-gallery .carousel",prevNextButtons:!1,pageDots:!1,draggable:!1};l(".carousel-nav").flickity(n)}}
/* =================== public methods ================== */function e(){t(),n(),(a.$carousel.length||a.$carouselWrap.length)&&(a.$carousel.flickity(i),a.$carouselWrap.flickity(r),a.$cellImage.unwrap())}
/* =============== export public methods =============== */var a={},o=!!l("body").hasClass("single-product"),i={cellAlign:"left",contain:!0,fullscreen:o,imagesLoaded:!0,lazyLoad:2},r={cellAlign:"left",contain:!0,pageDots:!1,imagesLoaded:!0,lazyLoad:6};return{init:e}}(),p=function(){"use strict";
// =================== private methods =================
function t(){r.$cartBtn=l(".single_add_to_cart_button"),r.$checkout=l(".site-header-cart"),r.$cartWidget=l(".widget_shopping_cart"),r.$btnLabel=l(".add_to_cart_label"),r.$btnLoader=l(".loader")}function n(){r.$cartBtn.on("click",function(t){e(t)})}function e(t){t.preventDefault();var e=l(t.currentTarget),n=e.parents("form").serialize()+"&"+encodeURI(e.attr("name"))+"="+encodeURI(e.attr("value"));e.is(".wc-variation-selection-needed")||(e.attr("disabled",!0).button("toggle").addClass(c.UPDATING),a(!0),l.post(e.attr("action"),n+"&_wp_http_referer="+e.attr("action"),function(t){var n=l(".widget_shopping_cart",t);
// update dropdown cart
r.$cartWidget.replaceWith(n),
// update fragments
l.ajax(o()),e.removeAttr("disabled").button("toggle").removeClass(c.UPDATING),a(!1)}))}function a(t){r.$btnLabel.toggleClass(c.D_NONE),r.$btnLoader.toggleClass(c.D_NONE)}function o(){var t;return{url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",success:function(t){t&&t.fragments&&(l.each(t.fragments,function(t,n){l(t).replaceWith(n)}),l(document.body).trigger("wc_fragments_refreshed")),
// Momentarily show the shopping basket
r.$checkout.addClass(c.CHECKOUT_ACTIVE),setTimeout(function(){r.$checkout.removeClass(c.CHECKOUT_ACTIVE)},4e3)}}}
// =================== public methods ==================
function i(){t(),n()}
// =============== export public methods ===============
var r={},c={UPDATING:"updating",CHECKOUT_ACTIVE:"checkout--active",D_NONE:"d-none"};return{init:i}}(),m=function(){"use strict";
/* =================== private methods ================= */
function t(){o.$trigger=l('[data-toggle="search"]')}function n(){o.$trigger.on("click",function(t){t.preventDefault(),e(this)})}function e(t){var n=l(t),e=l(n.data("target"));(r=!r)?(e.addClass(i.IN),e.find(".form-control").focus()):e.removeClass(i.IN)}
/* =================== public methods ================== */function a(){t(),n()}
/* =============== export public methods =============== */var o={},i={IN:"in"},r=!1;return{init:a}}(),$=function(){"use strict";
/* =================== private methods ================= */
function t(){a.$accordionPanel=l(".filter-collapse"),a.$accordionContent=l(".accordion-filter__content")}function n(){a.$accordionPanel.on("show.bs.collapse",function(){(i=!i)&&a.$accordionContent.addClass(o.IN)}),a.$accordionPanel.on("hide.bs.collapse",function(){(i=!i)||a.$accordionContent.removeClass(o.IN)})}
/* =================== public methods ================== */function e(){t(),n()}
/* =============== export public methods =============== */var a={},o={IN:"in"},i=!1;return{init:e}}(),h=function(){"use strict";
/* =================== private methods ================= */
function t(){i.$body=l("body"),i.$checkout=l(".site-header-cart"),i.$checkoutIcon=l(".site-header-cart > li")}function n(){i.$body.on("click",".cart-contents",function(t){e(t)}),i.$body.on("click",".checkout__cancel",function(t){a(t)})}function e(t){t.preventDefault(),i.$body.is(".woocommerce-cart, .woocommerce-checkout")||(i.$checkout.addClass(r.ACTIVE),i.$checkoutIcon.tooltip("hide").tooltip("disable"))}function a(t){t.preventDefault(),i.$checkout.removeClass(r.ACTIVE),i.$checkoutIcon.tooltip("enable")}
/* =================== public methods ================== */function o(){t(),n()}
/* =============== export public methods =============== */var i={},r={ACTIVE:"checkout--active"};return{init:o}}(),y=function(){"use strict";
/* =================== private methods ================= */
function t(){i.$window=l(window),i.$stickyAddToCart=l(".sticky-add-to-cart"),i.$trigger=l(".entry-summary"),i.$selectOptions=l(".sticky-add-to-cart .btn")}function n(){i.$window.on("scroll",d(function(){e()},200))}function e(){i.$trigger[0].getBoundingClientRect().top+i.$trigger[0].scrollHeight<0?i.$stickyAddToCart.addClass(r.IN):i.$stickyAddToCart.hasClass(r.IN)&&i.$stickyAddToCart.removeClass(r.IN)}function a(){var n=null;if(document.body.classList.forEach(function(t){"postid-"===t.substring(0,7)&&(n=t.replace(/[^0-9]/g,""))}),n){var e=l("#product-"+n);e&&(e.hasClass("product-type-simple")&&i.$selectOptions.on("click",function(t){t.preventDefault(),l("#site-header-cart")[0].scrollIntoView(),l(".single_add_to_cart_button").trigger("click")}),e.hasClass("product-type-simple")||e.hasClass("product-type-external")||i.$selectOptions.on("click",function(t){t.preventDefault(),e[0].scrollIntoView()}))}}
/* =================== public methods ================== */function o(){t(),i.$stickyAddToCart.length&&(e(),n(),a())}
/* =============== export public methods =============== */var i={},r={IN:"in"};return{init:o}}();
// You Ready for this?
l(document).ready(function(){o.init(),a.init(),i.init(),r.init(),c.init(),p.init(),m.init(),$.init(),h.init(),y.init(),
// Init tooltips
l(function(){l('[data-toggle="tooltip"]').tooltip()})})}(jQuery);
// https://elartica.com/2017/08/03/woocommerce-ajax-add-cart-single-product-page/
// https://stackoverflow.com/questions/25892871/woocommerce-product-page-how-to-create-ajax-on-add-to-cart-button